const rawInput = `
佳 아름답다 가 假 거짓 가 價 값 가 加 더하다 가 可 옳다 가 家 집 가 歌 노래 가 街 거리 가 各 각각 각 脚 다리 각 角 뿔 각 干 방패/천간 간 看 보다 간 間 사이 간 渴 목마르다 갈 感 느끼다 감 敢 감히 감 減 덜다 감 甘 달다 감 甲 갑옷/천간 갑 强 강하다 강 江 강 강 講 익히다/풀이하다 강 降 내리다 강 個 낱 개 皆 모두 개 改 고치다 개 開 열다 개 客 손님 객 更 다시 갱 去 가다 거 居 살다 거 巨 크다 거 舉 들다 거 車 수레 거/차 乾 하늘 건 建 세우다 건 堅 굳다 견 見 보다 견 犬 개 견 決 결정하다 결 潔 깨끗하다 결 結 맺다 결 京 서울 경 庚 천간 경 慶 경사 경 敬 공경하다 경 景 경치 경 競 다투다 경 經 글 경 耕 밭 갈다 경 輕 가볍다 경 驚 놀라다 경 季 계절 계 溪 시내 계 界 지경 계 癸 천간 계 計 세다 계 鷄 닭 계 古 옛 고 告 알리다 고 固 굳다 고 故 연고/옛 고 考 생각하다 고 苦 쓰다 고 高 높다 고 曲 굽다/노래 곡 穀 곡식 곡 谷 골짜기 곡 困 피곤하다 곤 坤 땅 곤 骨 뼈 골 公 공평하다 공 共 함께 공 功 업적 공 工 장인 공 空 비다 공 果 열매/결과 과 科 과정 과 課 매기다 과 過 지나다/잘못 과 官 벼슬 관 觀 보다 관 關 관계하다 관 光 빛 광 廣 넓다 광 交 사귀다 교 教 가르치다 교 校 학교 교 橋 다리 교 久 오래다 구 九 아홉 구 口 입 구 句 글귀 구 救 구원하다 구 求 구하다 구 究 연구하다 구 舊 예 구 國 나라 국 君 임금 군 
軍 군사 군 郡 고을 군 弓 활 궁 勸 권하다 권 卷 책 권 權 권세 권 歸 돌아가다 귀 貴 귀하다 귀 均 고르다 균 極 다하다 극 勤 부지런하다 근 根 뿌리 근 近 가깝다 근 今 이제 금 禁 금하다 금 金 쇠 금 及 미치다 급 急 급하다 급 給 주다 급 其 그 기 基 터 기 己 몸/자기 기 幾 몇/기미 기 技 재주 기 旣 이미 기 期 기약하다 기 氣 기운 기 記 기록하다 기 起 일어나다 기 吉 길하다 길 暖 따뜻하다 난 難 어렵다 난 南 남쪽 남 男 남자 남 乃 이에 내 內 안 내 女 여자 녀 年 해/나이 년 念 생각 념 怒 성내다 노 農 농사 농 能 능하다 능 多 많다 다 丹 붉다 단 但 다만 단 單 홀 단 短 짧다 단 端 끝/바르다 단 達 통달하다 달 談 말씀 담 答 대답하다 답 堂 집 당 當 마땅하다 당 代 대신하다 대 待 기다리다 대 對 대하다 대 大 크다 대 德 덕 덕 刀 칼 도 到 이르다 도 度 법도 도 島 섬 도 徒 무리 도 都 도읍 도 道 길/도리 도 圖 그림 도 讀 읽다 독 獨 홀로 독 冬 겨울 동 同 한가지/같다 동 洞 고을 동 童 아이 동 東 동쪽 동 動 움직이다 동 斗 말 두 豆 콩/그릇 두 頭 머리 두 得 얻다 득 等 무리/같다 등 登 오르다 등 燈 등잔 등 落 떨어지다 락 樂 즐겁다 락 卵 알 란 浪 물결 랑 郎 사내 랑 來 오다 래 冷 차다 랭 兩 둘 량 量 헤아리다 량 涼 서늘하다 량 良 어질다 량 令 명령하다 령 領 거느리다 령 例 본보기 례 禮 예도 례 勞 힘쓰다 로 老 늙다 로 路 길 로 露 이슬 로 歷 지내다 력 力 힘 력 連 잇다 련 練 익힐 련 烈 세차다 렬 列 벌이다 렬 
綠 푸르다 록 論 논하다 론 料 헤아리다 료 柳 버들 류 流 흐르다 류 留 머무르다 류 六 여섯 륙 陸 육지 륙 律 법 률 倫 인륜 륜 利 이롭다 리 李 자두나무 리 理 다스리다 리 里 마을 리 林 수풀 림 立 서다 립 馬 말 마 莫 없다 막 晩 늦다 만 滿 차다 만 萬 일만 만 末 끝 말 亡 망하다 망 忘 잊다 망 望 바라다 망 忙 바쁘다 망 妹 누이 매 每 매양 매 買 사다 매 賣 팔다 매 麥 보리 맥 免 면하다 면 勉 힘쓰다 면 眠 자다 면 面 얼굴 면 名 이름 명 命 목숨 명 明 밝다 명 鳴 울다 명 暮 저물다 모 母 어미 모 毛 털 모 木 나무 목 妙 묘하다 묘 卯 토끼/지지 묘 目 눈 목 務 힘쓰다 무 戊 천간 무 武 무사 무 無 없다 무 舞 춤추다 무 茂 무성하다 무 墨 먹 묵 問 묻다 문 文 글월 문 聞 듣다 문 門 문 문 勿 말다 물 物 물건 물 味 맛 미 尾 꼬리 미 未 아니다/지지 미 米 쌀 미 美 아름답다 미 民 백성 민 密 빽빽하다 밀 朴 순박하다 박 半 반 반 反 돌이키다 반 飯 밥 반 發 피다 발 房 방 방 放 놓다 방 方 모/방위 방 訪 찾다 방 防 막다 방 拜 절 배 杯 잔 배 白 희다 백 百 일백 백 番 차례 번 伐 치다 벌 凡 무릇 범 變 변하다 변 別 다르다 별 法 법 법 丙 천간 병 兵 군사 병 病 병 병 保 지키다 보 報 알리다/갚다 보 步 걸음 보 伏 엎드리다 복 復 돌아오다 복 服 옷 복 
否 아니다 부 福 복 복 本 근본 본 奉 받들다 봉 逢 만나다 봉 夫 사내 부 婦 아내 부 富 부유하다 부 扶 돕다 부 浮 뜨다 부 不 아니다 불 父 아버지 부 部 떼/거느리다 부 北 북쪽 북 分 나누다 분 佛 부처 불 朋 벗 붕 備 갖추다 비 比 견주다 비 悲 슬프다 비 氷 얼음 빙 非 아니다 비 飛 날다 비 鼻 코 비 貧 가난하다 빈 事 일 사 仕 섬기다 사 使 부리다 사 四 넷 사 師 스승 사 史 역사 사 士 선비 사 寺 절 사 巳 지지 사 射 쏘다 사 思 생각 사 死 죽다 사 私 사사롭다 사 絲 실 사 舍 집 사 算 세다 산 謝 사례하다 사 山 산 산 散 흩어지다 산 産 낳다 산 殺 죽이다 살 三 셋 삼 上 위 상 商 장사 상 相 서로 상 傷 다치다 상 喪 잃다 상 尙 오히려 상 常 항상 상 想 생각 상 賞 상주다 상 霜 서리 상 色 빛 색 生 나다 생 序 차례 서 席 자리 석 暑 덥다 서 書 글/책 서 西 서쪽 서 夕 저녁 석 昔 옛 석 惜 아끼다 석 石 돌 석 先 먼저 선 鮮 곱다 선 仙 신선 선 善 착하다 선 線 줄 선 船 배 선 選 가리다 선 舌 혀 설 設 베풀다 설 說 말씀 설 盛 성하다 성 雪 눈 설 城 성 성 姓 성씨 성 性 성품 성 成 이루다 성 星 별 성 省 살피다 성 聖 성인 성 聲 소리 성 世 세상 세 誠 정성 성 勢 형세 세 歲 해 세 洗 씻다 세 稅 세금 세 細 가늘다 세 小 작다 소 少 적다/젊다 소 所 하는바 소 
消 사라지다 소 笑 웃다 소 素 본디 소 俗 풍속 속 續 잇다 속 速 빠르다 속 孫 손자 손 松 소나무 송 送 보내다 송 修 닦다 수 受 받다 수 壽 목숨 수 守 지키다 수 愁 근심 수 手 손 수 授 주다 수 收 거두다 수 數 세다 수 樹 나무 수 水 물 수 秀 빼어나다 수 誰 누구 수 雖 비록 수 須 모름지기 수 首 머리 수 叔 아저씨 숙 宿 자다 숙 淑 맑다 숙 純 순수하다 순 順 순하다/따르다 순 戌 지지 술 崇 높다 숭 拾 줍다 습 習 익히다 습 乘 타다 승 勝 이기다 승 承 잇다 승 始 비로소 시 市 시장/저자 시 施 베풀다 시 是 옳다 시 時 때 시 示 보이다 시 視 보다 시 詩 글/시 시 試 시험하다 시 式 법 식 植 심다 식 識 알다 식 食 먹다 식 信 믿다 신 新 새롭다 신 申 지지 신 神 귀신 신 臣 신하 신 身 몸 신 辛 맵다/천간 신 失 잃다 실 室 집 실 實 열매 실 心 마음 심 深 깊다 심 甚 심하다 심 十 열 십 氏 성씨 씨 兒 아이 아 我 나 아 惡 악하다 악 安 편안하다 안 案 책상 안 眼 눈 안 顔 얼굴 안 巖 바위 암 暗 어둡다 암 仰 우러르다 앙 哀 슬프다 애 愛 사랑하다 애 也 어조사 야 野 들 야 夜 밤 야 弱 약하다 약 約 맺다 약 若 같다 약 藥 약 약 揚 날리다 낭 洋 큰 바다 양 羊 양 양 讓 사양하다 양 陽 볕 양 養 기르다 양 於 어조사 어 漁 고기 잡다 어 語 말씀 어 魚 물고기 어 億 억 억 憶 생각하다 억 言 말씀 언 嚴 엄하다 엄 業 일 업 余 나 여 
如 같다 여 汝 너 여 與 더불다 여 餘 남다 여 亦 또 역 易 바꾸다 역 逆 거스르다 역 然 그러하다 연 煙 연기 연 研 갈다 연 悅 기쁘다 열 熱 덥다 열 炎 불꽃 염 葉 잎 엽 榮 영화롭다 영 永 길다 영 迎 맞이하다 영 英 꽃부리 영 藝 재주 예 五 다섯 오 午 낮/지지 오 吾 나 오 悟 깨닫다 오 烏 까마귀 오 誤 잘못하다 오 屋 집 옥 玉 구슬 옥 溫 따뜻하다 온 瓦 기와 와 臥 눕다 와 曰 말하다 왈 完 완전하다 완 王 임금 왕 往 가다 왕 外 바깥 외 要 중요하다 요 宇 집 우 右 오른쪽 우 友 벗 우 浴 목욕하다 욕 欲 하고자 하다 욕 尤 더욱 우 憂 근심 우 勇 날쌔다 용 牛 소 우 容 얼굴 용 遇 만나다 우 用 쓰다 용 于 어조사 우 又 또 우 雲 구름 운 運 옮기다 운 云 말하다 운 雄 수컷 웅 元 으뜸 원 圓 둥글다 원 原 근원 원 園 동산 원 怨 원망하다 원 遠 멀다 원 願 원하다 원 月 달 월 偉 크다 위 位 자리 위 危 위태롭다 위 威 위엄 위 為 하다 위 唯 오직 유 幼 어리다 유 有 있다 유 柔 부드럽다 유 油 기름 유 猶 오히려 유 由 말미암아 유 遊 놀다 유 遺 남기다 유 酉 지지 유 肉 고기 육 育 기르다 육 恩 은혜 은 銀 은 은 乙 새/천간 을 吟 읊다 음 陰 그늘 음 音 소리 음 飲 마시다 음 泣 울다 읍 邑 고을 읍 應 응하다 응 意 뜻 의 依 의지하다 의 矣 어조사 의 義 옳다/뜻 의 衣 옷 의 議 의논하다 의 醫 의원 의 二 둘 이 以 ~로써 이 已 이미 이 
異 다르다 이 移 옮기다 이 而 말 잇다 이 耳 귀 이 益 더하다 익 人 사람 인 仁 어질다 인 印 도장 인 因 인하다 인 寅 지지 인 引 끌다 인 忍 참다 인 認 알다 인 日 해/날 일 一 하나 일 壬 천간 임 入 들어가다 입 姊 누이 자 子 아들 자 字 글자 자 慈 사랑하다 자 者 사람 자 自 스스로 자 作 짓다 작 昨 어제 작 場 마당 장 壯 씩씩하다 장 將 장수 장 章 글 장 長 길다 장 再 다시 재 哉 어조사 재 在 있다 재 才 재주 재 材 재목 재 栽 심다 재 財 재물 재 爭 다투다 쟁 低 낮다 저 著 나타나다 저 貯 쌓다 저 敵 대적하다 적 的 과녁 적 赤 붉다 적 適 맞다 적 傳 전하다 전 全 온전하다 전 典 법 전 前 앞 전 展 펴다 전 戰 싸우다 전 田 밭 전 錢 돈 전 電 번개 전 節 마디 절 絶 끊다 절 店 가게 점 接 잇다 접 丁 장정/천간 정 井 우물 정 停 머무르다 정 定 정하다 정 庭 뜰 정 情 뜻 정 政 정사 정 正 바르다 정 淨 깨끗하다 정 精 자세하다 정 貞 곧다 정 靜 고요하다 정 頂 정수리 정 帝 임금 제 弟 아우 제 祭 제사 제 第 차례 제 製 짓다 제 諸 모두 제 除 덜다 제 題 제목 제 兆 조 조 助 돕다 조 早 일찍 조 朝 아침 조 祖 할아버지 조 調 고르다 조 造 만들다 조 鳥 새 조 族 겨레 족 足 발 족 存 있다 존 尊 높다 존 卒 군사 졸 宗 마루 종 從 따르다 종 種 씨/종류 종 終 마치다 종 鐘 쇠북 종 坐 앉다 좌 左 왼쪽 좌 罪 허물 죄 
主 주인 주 住 살다 주 宙 집 주 晝 낮 주 朱 붉다 주 注 물 대다 주 走 달리다 주 酒 술 주 竹 대나무 죽 中 가운데 중 衆 무리 중 重 무겁다 중 卽 곧/나아가다 즉 增 더하다 증 曾 일찍 증 證 증거 증 之 가다/어조사 지 只 다만 지 地 땅 지 志 뜻 지 持 가지다 지 指 가리키다 지 支 지탱하다 지 枝 가지 지 止 그치다 지 知 알다 지 紙 종이 지 至 이르다 지 直 곧다 직 盡 다하다 진 真 참 진 辰 지지 진 進 나아가다 진 質 바탕 질 執 잡다 집 集 모으다 집 且 또 차 借 빌리다 차 次 버금 차 此 이 차 着 붙다 착 察 살피다 찰 參 참여하다 참 唱 부를 창 昌 창성하다 창 窓 창문 창 採 캐다 채 菜 나물 채 冊 책 책 責 꾸짖다 책 妻 아내 처 處 곳 처 尺 자 척 千 일천 천 天 하늘 천 川 내 천 泉 샘 천 淺 얕다 천 鐵 쇠 철 晴 개다 청 清 맑다 청 聽 듣다 청 请 청하다 청 青 푸르다 청 體 몸 체 初 처음 초 招 부르다 초 草 풀 초 寸 마디 촌 村 마을 촌 最 가장 최 推 밀다 추 秋 가을 추 追 쫓다 추 丑 지지 축 祝 빌다 축 春 봄 춘 出 나가다 출 充 차다 충 忠 충성 충 蟲 벌레 충 取 가지다 취 吹 불다 취 就 나아가다 취 治 다스리다 치 致 이르다 치 齒 이 치 則 법칙 칙 親 친하다 친 七 일곱 칠 針 바늘 침 快 상쾌하다 쾌 他 다르다 타 打 치다 타 脫 벗다 탈 探 찾다 탐 太 크다 태 泰 크다 태 宅 집 택 土 흙 토 
統 거느리다 통 通 통하다 통 退 물러나다 퇴 投 던지다 투 特 특별하다 특 波 물결 파 破 깨트리다 파 判 판단하다 판 八 여덟 팔 敗 패하다 패 便 편하다 편 貝 조개 패 片 조각 편 篇 책 편 平 평평하다 평 閉 닫다 폐 布 베/펴다 포 抱 안다 포 暴 사납다 폭 表 겉 표 品 물건 품 豐 풍년 풍 風 바람 풍 彼 저 피 皮 가죽 피 匹 짝 필 必 반드시 필 筆 붓 필 下 아래 하 何 어찌 하 夏 여름 하 河 물 하 賀 하례하다 하 學 배우다 학 寒 차다 한 恨 한하다 한 漢 한나라 한 閑 한가하다 한 限 한정하다 한 韓 나라 이름 한 合 합하다 합 恒 항상 항 亥 지지 해 害 해치다 해 海 바다 해 解 풀다 해 幸 다행 행 行 행하다 행 向 향하다 향 鄕 시골 향 虛 비다 허 香 향기 향 許 허락하다 허 革 가죽/바꾸다 혁 現 나타나다 현 賢 어질다 현 血 피 혈 協 돕다 협 兄 형 형 刑 형벌 형 形 모양 형 惠 은혜 혜 乎 어조사 호 呼 부르다 호 好 좋다 호 户 집 호 湖 호수 호 虎 호랑이 호 號 이름 호 或 혹시 혹 混 섞다 혼 婚 혼인하다 혼 紅 붉다 홍 化 되다 화 和 화목하다 화 火 불 화 畫 그림 화 花 꽃 화 華 빛나다 화 話 말씀 화 患 근심 환 貨 재물 화 歡 기쁘다 환 活 살다 활 皇 임금 황 黃 누렇다 황 회 돌다 회 會 모이다 회 孝 효도 효 效 본받다 효 後 뒤 후 厚 두텁다 후 訓 가르치다 훈 休 쉬다 휴 凶 흉하다 흉 胸 가슴 흉 黑 검다 흑 興 일어나다 흥 喜 기쁘다 희 希 바라다 희
`;

function parseAndCheck() {
    // 1. Tokenize
    const tokens = rawInput.replace(/\\n/g, ' ').replace(/\s+/g, ' ').trim().split(' ');

    // 2. Extract Kanji
    const isHanja = (str) => /[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff]/.test(str);
    const hanjaList = [];

    // Simple parser: just grab every token that looks like a Hanja
    // And also grab the full entry for context
    const skipped = [];
    let i = 0;
    while (i < tokens.length) {
        if (isHanja(tokens[i])) {
            const hanja = tokens[i];

            // Look ahead for meaning/reading
            let j = i + 1;
            while (j < tokens.length && !isHanja(tokens[j])) {
                j++;
            }
            const context = tokens.slice(i, j).join(' ');
            hanjaList.push({ kanji: hanja, context: context });
            i = j;
        } else {
            skipped.push(tokens[i]);
            i++;
        }
    }

    const fs = require('fs');
    fs.writeFileSync('c:/@app-dev/web-hanja/skipped.txt', skipped.join('\\n'), 'utf8');

    console.log(`Total Hanja found in list: ${hanjaList.length}`);
    console.log(`Skipped tokens count: ${skipped.length}`);

    // 3. Find Duplicates
    const counts = new Map();
    hanjaList.forEach(item => {
        if (!counts.has(item.kanji)) {
            counts.set(item.kanji, []);
        }
        counts.get(item.kanji).push(item.context);
    });

    let dupCount = 0;
    console.log("--- Duplicates ---");
    counts.forEach((contexts, kanji) => {
        if (contexts.length > 1) {
            console.log(`${kanji} appears ${contexts.length} times:`);
            contexts.forEach(c => console.log(`  - ${c}`));
            dupCount++;
        }
    });

    console.log("\n--- Checking for merged entries (long contexts) ---");
    hanjaList.forEach(item => {
        // Context includes the Kanji itself + meaning + reading.
        // So standard is "Kanji Mean Read" => 3 tokens.
        // "Kanji Mean1 Mean2 Read" => 4 tokens.
        const tokens = item.context.split(' ');
        if (tokens.length > 3) {
            console.log(`Potential merge in '${item.kanji}': "${item.context}"`);
        }
    });

    console.log("\n--- Checking for multi-char Kanji tokens ---");
    hanjaList.forEach(item => {
        if (item.kanji.length > 1) {
            console.log(`Multi-char Kanji found: '${item.kanji}' (Context: "${item.context}")`);
        }
    });

    console.log(`\nTotal unique Hanja: ${counts.size}`);
}

parseAndCheck();
